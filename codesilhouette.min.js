canvas=document.getElementById("myCanvas");context=canvas.getContext("2d");var unitSize=5,silhouetteColour="#333";
function drawSilhouette(){s=$("#codeArea").val();for(var c=s.split("\n"),b=[],d=0,a=0;a<c.length;a++)b.push(c[a].length),c[a].length>d&&(d=c[a].length);canvas.width=Math.floor(d*unitSize/2);canvas.height=b.length*unitSize;for(a=0;a<b.length;a++)c=a*unitSize,d=Math.floor(b[a]*unitSize/2),context.beginPath(),context.rect(0,c,d,unitSize),context.fillStyle=silhouetteColour,context.fill();b=canvas.toDataURL();$("#canvasImg").css("display","inline");$("#permalinkWrapper").css("display","inline");document.getElementById("canvasImg").src=
b;$("#permalink").attr("href",b)};